<!DOCTYPE html>
<html>
<head>
  <title>Lucky Dice</title>
  <style>
    body { text-align: center; font-family: Arial; background: #f9fff8; padding: 20px; }
    button { padding: 10px 20px; margin-top: 10px; font-size: 16px; background: #00b96b; color: white; border: none; border-radius: 8px; }
    #dice { font-size: 100px; }
  </style>
</head>
<body>
  <h2>üé≤ Lucky Dice</h2>
  <p>Stake (Min ‚Ç¶100):</p>
  <input id="stake" type="number" /><br>
  <button onclick="rollDice()">Roll</button>
  <div id="dice">üé≤</div>
  <h3 id="result"></h3>
  <p><a href="dashboard.html">‚¨Ö Back to Dashboard</a></p>

<script>
function getBalance() {
  return parseFloat(localStorage.getItem("balance") || "20000");
}
function setBalance(val) {
  localStorage.setItem("balance", val.toFixed(3));
}
function saveToHistory(msg) {
  let logs = JSON.parse(localStorage.getItem("history") || "[]");
  logs.unshift({ text: msg, time: new Date().toLocaleString() });
  localStorage.setItem("history", JSON.stringify(logs));
}

function rollDice() {
  const stake = parseFloat(document.getElementById("stake").value);
  if (isNaN(stake) || stake < 100) return alert("Minimum stake is ‚Ç¶100");
  if (stake > getBalance()) return alert("Insufficient balance");

  let newBal = getBalance() - stake;
  setBalance(newBal);

  const outcome = Math.floor(Math.random() * 6) + 1;
  document.getElementById("dice").textContent = ["‚öÄ","‚öÅ","‚öÇ","‚öÉ","‚öÑ","‚öÖ"][outcome - 1];

  const win = outcome >= 4;
  const result = document.getElementById("result");

  if (win) {
    const reward = stake * 2;
    setBalance(getBalance() + reward);
    result.textContent = `üéâ You won ‚Ç¶${reward.toFixed(2)}!`;
    saveToHistory(`‚úÖ Lucky Dice Win: ‚Ç¶${reward.toFixed(2)} from ‚Ç¶${stake}`);
  } else {
    result.textContent = `üòû You lost ‚Ç¶${stake.toFixed(2)}.`;
    saveToHistory(`‚ùå Lucky Dice Loss: ‚Ç¶${stake}`);
  }
}
</script>
</body>
</html>