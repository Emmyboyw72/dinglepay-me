<!DOCTYPE html>
<html>
<head>
  <title>üèÅ Racing Game</title>
  <style>
    body { font-family: Arial; text-align: center; background: #f1f9f1; padding: 20px; }
    #track { margin: 30px auto; width: 90%; max-width: 400px; height: 20px; background: #ddd; border-radius: 10px; position: relative; }
    #car { width: 30px; height: 20px; background: red; position: absolute; top: 0; left: 0; border-radius: 5px; }
    button { padding: 10px 20px; font-size: 16px; background: #00b96b; color: white; border: none; border-radius: 8px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>üèéÔ∏è Racing Game</h2>
  <p>Stake (Min ‚Ç¶100):</p>
  <input id="stake" type="number" /><br>
  <button onclick="startRace()">Start Race</button>

  <div id="track">
    <div id="car"></div>
  </div>
  <h3 id="result"></h3>
  <p><a href="dashboard.html">‚¨Ö Back to Dashboard</a></p>

<script>
function getBalance() {
  return parseFloat(localStorage.getItem("balance") || "20000");
}
function setBalance(val) {
  localStorage.setItem("balance", val.toFixed(3));
}
function saveToHistory(msg) {
  let logs = JSON.parse(localStorage.getItem("history") || "[]");
  logs.unshift({ text: msg, time: new Date().toLocaleString() });
  localStorage.setItem("history", JSON.stringify(logs));
}

function startRace() {
  const stake = parseFloat(document.getElementById("stake").value);
  if (isNaN(stake) || stake < 100) return alert("Minimum stake is ‚Ç¶100");
  if (stake > getBalance()) return alert("Insufficient balance");

  let newBal = getBalance() - stake;
  setBalance(newBal);

  const car = document.getElementById("car");
  const result = document.getElementById("result");
  result.textContent = "";

  let pos = 0;
  car.style.left = "0px";
  const interval = setInterval(() => {
    pos += Math.random() * 10;
    if (pos >= 370) {
      clearInterval(interval);
      const win = Math.random() > 0.5;
      if (win) {
        const reward = stake * 2;
        setBalance(getBalance() + reward);
        result.textContent = `üèÅ You won ‚Ç¶${reward.toFixed(2)}!`;
        saveToHistory(`‚úÖ Racing Game Win: ‚Ç¶${reward.toFixed(2)} from ‚Ç¶${stake}`);
      } else {
        result.textContent = `üòì You lost ‚Ç¶${stake.toFixed(2)}.`;
        saveToHistory(`‚ùå Racing Game Loss: ‚Ç¶${stake}`);
      }
    } else {
      car.style.left = `${pos}px`;
    }
  }, 100);
}
</script>
</body>
</html>