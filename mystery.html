<!DOCTYPE html>
<html>
<head>
  <title>üéÅ Mystery Box</title>
  <style>
    body { font-family: Arial; text-align: center; background: #fdfaf6; padding: 20px; }
    .box {
      width: 150px;
      height: 150px;
      background: #ffcc00;
      display: inline-block;
      font-size: 80px;
      line-height: 150px;
      border-radius: 15px;
      cursor: pointer;
      margin-top: 20px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      margin-top: 10px;
      border: none;
    }
    button {
      background: #00b96b;
      color: white;
    }
  </style>
</head>
<body>
  <h2>üéÅ Mystery Box</h2>
  <p>Stake (Min ‚Ç¶100):</p>
  <input type="number" id="stake" placeholder="Enter amount"><br>
  <button onclick="openBox()">Open Mystery Box</button>

  <div id="box" class="box" onclick="openBox()">üéÅ</div>
  <h3 id="result"></h3>
  <p><a href="dashboard.html">‚¨Ö Back to Dashboard</a></p>

<script>
function getBalance() {
  return parseFloat(localStorage.getItem("balance") || "20000");
}
function setBalance(val) {
  localStorage.setItem("balance", val.toFixed(3));
}
function saveToHistory(msg) {
  let logs = JSON.parse(localStorage.getItem("history") || "[]");
  logs.unshift({ text: msg, time: new Date().toLocaleString() });
  localStorage.setItem("history", JSON.stringify(logs));
}

function openBox() {
  let stake = parseFloat(document.getElementById("stake").value);
  if (isNaN(stake) || stake < 100) return alert("Stake must be ‚Ç¶100 or more.");
  if (stake > getBalance()) return alert("Insufficient balance.");

  setBalance(getBalance() - stake);

  const win = Math.random() > 0.5;
  let result = document.getElementById("result");

  if (win) {
    const reward = stake * 2;
    setBalance(getBalance() + reward);
    result.innerHTML = `üéâ You opened a WIN box! ‚Ç¶${reward.toFixed(2)} added!`;
    saveToHistory(`‚úÖ Mystery Box Win: ‚Ç¶${reward.toFixed(2)} from ‚Ç¶${stake}`);
  } else {
    result.innerHTML = `üò¢ Empty box! ‚Ç¶${stake.toFixed(2)} lost.`;
    saveToHistory(`‚ùå Mystery Box Loss: ‚Ç¶${stake}`);
  }

  document.getElementById("box").textContent = win ? "üí∞" : "‚ùå";
}
</script>
</body>
</html>